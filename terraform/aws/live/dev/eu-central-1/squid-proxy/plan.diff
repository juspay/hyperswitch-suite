[0m[1mmodule.squid_proxy.data.aws_caller_identity.current: Reading...[0m[0m
[0m[1mmodule.squid_proxy.data.aws_region.current: Reading...[0m[0m
[0m[1mdata.aws_lb.existing[0]: Reading...[0m[0m
[0m[1mmodule.squid_proxy.data.aws_region.current: Read complete after 0s [id=eu-central-1][0m
[0m[1mmodule.squid_proxy.data.aws_caller_identity.current: Read complete after 0s [id=225681119357][0m
[0m[1mdata.aws_lb.existing[0]: Read complete after 1s [id=arn:aws:elasticloadbalancing:eu-central-1:225681119357:loadbalancer/net/squid-nlb/ce5016edcbc76d0c][0m
[0m[1mdata.aws_lb_listener.existing[0]: Reading...[0m[0m
[0m[1mdata.aws_lb_listener.existing[0]: Read complete after 1s [id=arn:aws:elasticloadbalancing:eu-central-1:225681119357:listener/net/squid-nlb/ce5016edcbc76d0c/30bdd46e918cb7f0][0m

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  [32m+[0m create[0m

Terraform will perform the following actions:

[1m  # module.squid_proxy.aws_key_pair.squid_key_pair[0][0m will be created
[0m  [32m+[0m[0m resource "aws_key_pair" "squid_key_pair" {
      [32m+[0m[0m arn             = (known after apply)
      [32m+[0m[0m fingerprint     = (known after apply)
      [32m+[0m[0m id              = (known after apply)
      [32m+[0m[0m key_name        = "dev-hyperswitch-squid-keypair-eu-central-1"
      [32m+[0m[0m key_name_prefix = (known after apply)
      [32m+[0m[0m key_pair_id     = (known after apply)
      [32m+[0m[0m key_type        = (known after apply)
      [32m+[0m[0m public_key      = (known after apply)
      [32m+[0m[0m tags            = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
      [32m+[0m[0m tags_all        = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
    }

[1m  # module.squid_proxy.aws_ssm_parameter.squid_private_key[0][0m will be created
[0m  [32m+[0m[0m resource "aws_ssm_parameter" "squid_private_key" {
      [32m+[0m[0m arn            = (known after apply)
      [32m+[0m[0m data_type      = (known after apply)
      [32m+[0m[0m description    = "Private SSH key for dev-hyperswitch-squid instances"
      [32m+[0m[0m has_value_wo   = (known after apply)
      [32m+[0m[0m id             = (known after apply)
      [32m+[0m[0m insecure_value = (known after apply)
      [32m+[0m[0m key_id         = (known after apply)
      [32m+[0m[0m name           = (known after apply)
      [32m+[0m[0m tags           = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Name"        = "dev-hyperswitch-squid-private-key"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
      [32m+[0m[0m tags_all       = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Name"        = "dev-hyperswitch-squid-private-key"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
      [32m+[0m[0m tier           = (known after apply)
      [32m+[0m[0m type           = "SecureString"
      [32m+[0m[0m value          = (sensitive value)
      [32m+[0m[0m value_wo       = (write-only attribute)
      [32m+[0m[0m version        = (known after apply)
    }

[1m  # module.squid_proxy.tls_private_key.squid[0][0m will be created
[0m  [32m+[0m[0m resource "tls_private_key" "squid" {
      [32m+[0m[0m algorithm                     = "RSA"
      [32m+[0m[0m ecdsa_curve                   = "P224"
      [32m+[0m[0m id                            = (known after apply)
      [32m+[0m[0m private_key_openssh           = (sensitive value)
      [32m+[0m[0m private_key_pem               = (sensitive value)
      [32m+[0m[0m private_key_pem_pkcs8         = (sensitive value)
      [32m+[0m[0m public_key_fingerprint_md5    = (known after apply)
      [32m+[0m[0m public_key_fingerprint_sha256 = (known after apply)
      [32m+[0m[0m public_key_openssh            = (known after apply)
      [32m+[0m[0m public_key_pem                = (known after apply)
      [32m+[0m[0m rsa_bits                      = 4096
    }

[1m  # module.squid_proxy.module.asg.aws_autoscaling_group.this[0m will be created
[0m  [32m+[0m[0m resource "aws_autoscaling_group" "this" {
      [32m+[0m[0m arn                              = (known after apply)
      [32m+[0m[0m availability_zones               = (known after apply)
      [32m+[0m[0m default_cooldown                 = 300
      [32m+[0m[0m desired_capacity                 = 1
      [32m+[0m[0m enabled_metrics                  = [
          [32m+[0m[0m "GroupDesiredCapacity",
          [32m+[0m[0m "GroupInServiceInstances",
          [32m+[0m[0m "GroupMaxSize",
          [32m+[0m[0m "GroupMinSize",
          [32m+[0m[0m "GroupTotalInstances",
        ]
      [32m+[0m[0m force_delete                     = false
      [32m+[0m[0m force_delete_warm_pool           = false
      [32m+[0m[0m health_check_grace_period        = 300
      [32m+[0m[0m health_check_type                = "ELB"
      [32m+[0m[0m id                               = (known after apply)
      [32m+[0m[0m ignore_failed_scaling_activities = false
      [32m+[0m[0m load_balancers                   = (known after apply)
      [32m+[0m[0m max_size                         = 2
      [32m+[0m[0m metrics_granularity              = "1Minute"
      [32m+[0m[0m min_size                         = 1
      [32m+[0m[0m name                             = "dev-hyperswitch-squid-asg"
      [32m+[0m[0m name_prefix                      = (known after apply)
      [32m+[0m[0m predicted_capacity               = (known after apply)
      [32m+[0m[0m protect_from_scale_in            = false
      [32m+[0m[0m service_linked_role_arn          = (known after apply)
      [32m+[0m[0m target_group_arns                = (known after apply)
      [32m+[0m[0m termination_policies             = [
          [32m+[0m[0m "Default",
        ]
      [32m+[0m[0m vpc_zone_identifier              = [
          [32m+[0m[0m "subnet-015ce1914ed8568b6",
          [32m+[0m[0m "subnet-0f1f8c28509188dd6",
        ]
      [32m+[0m[0m wait_for_capacity_timeout        = "10m"
      [32m+[0m[0m warm_pool_size                   = (known after apply)

      [32m+[0m[0m availability_zone_distribution (known after apply)

      [32m+[0m[0m capacity_reservation_specification (known after apply)

      [32m+[0m[0m launch_template {
          [32m+[0m[0m id      = (known after apply)
          [32m+[0m[0m name    = (known after apply)
          [32m+[0m[0m version = "$Latest"
        }

      [32m+[0m[0m mixed_instances_policy (known after apply)

      [32m+[0m[0m tag {
          [32m+[0m[0m key                 = "Environment"
          [32m+[0m[0m propagate_at_launch = false
          [32m+[0m[0m value               = "dev"
        }
      [32m+[0m[0m tag {
          [32m+[0m[0m key                 = "Environment"
          [32m+[0m[0m propagate_at_launch = true
          [32m+[0m[0m value               = "dev"
        }
      [32m+[0m[0m tag {
          [32m+[0m[0m key                 = "ManagedBy"
          [32m+[0m[0m propagate_at_launch = false
          [32m+[0m[0m value               = "Terraform"
        }
      [32m+[0m[0m tag {
          [32m+[0m[0m key                 = "ManagedBy"
          [32m+[0m[0m propagate_at_launch = true
          [32m+[0m[0m value               = "Terraform"
        }
      [32m+[0m[0m tag {
          [32m+[0m[0m key                 = "Module"
          [32m+[0m[0m propagate_at_launch = false
          [32m+[0m[0m value               = "composition/squid-proxy"
        }
      [32m+[0m[0m tag {
          [32m+[0m[0m key                 = "Module"
          [32m+[0m[0m propagate_at_launch = true
          [32m+[0m[0m value               = "composition/squid-proxy"
        }
      [32m+[0m[0m tag {
          [32m+[0m[0m key                 = "Name"
          [32m+[0m[0m propagate_at_launch = false
          [32m+[0m[0m value               = "dev-hyperswitch-squid-asg"
        }
      [32m+[0m[0m tag {
          [32m+[0m[0m key                 = "Name"
          [32m+[0m[0m propagate_at_launch = true
          [32m+[0m[0m value               = "dev-hyperswitch-squid-instance"
        }
      [32m+[0m[0m tag {
          [32m+[0m[0m key                 = "Project"
          [32m+[0m[0m propagate_at_launch = false
          [32m+[0m[0m value               = "hyperswitch"
        }
      [32m+[0m[0m tag {
          [32m+[0m[0m key                 = "Project"
          [32m+[0m[0m propagate_at_launch = true
          [32m+[0m[0m value               = "hyperswitch"
        }
      [32m+[0m[0m tag {
          [32m+[0m[0m key                 = "Region"
          [32m+[0m[0m propagate_at_launch = false
          [32m+[0m[0m value               = "eu-central-1"
        }
      [32m+[0m[0m tag {
          [32m+[0m[0m key                 = "Region"
          [32m+[0m[0m propagate_at_launch = true
          [32m+[0m[0m value               = "eu-central-1"
        }
      [32m+[0m[0m tag {
          [32m+[0m[0m key                 = "Service"
          [32m+[0m[0m propagate_at_launch = false
          [32m+[0m[0m value               = "squid-proxy"
        }
      [32m+[0m[0m tag {
          [32m+[0m[0m key                 = "Service"
          [32m+[0m[0m propagate_at_launch = true
          [32m+[0m[0m value               = "squid-proxy"
        }

      [32m+[0m[0m traffic_source (known after apply)
    }

[1m  # module.squid_proxy.module.asg_security_group.aws_security_group.this[0m will be created
[0m  [32m+[0m[0m resource "aws_security_group" "this" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m description            = "Security group for Squid proxy ASG instances"
      [32m+[0m[0m egress                 = (known after apply)
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ingress                = (known after apply)
      [32m+[0m[0m name                   = "dev-hyperswitch-squid-asg-sg"
      [32m+[0m[0m name_prefix            = (known after apply)
      [32m+[0m[0m owner_id               = (known after apply)
      [32m+[0m[0m revoke_rules_on_delete = true
      [32m+[0m[0m tags                   = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Name"        = "dev-hyperswitch-squid-asg-sg"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
      [32m+[0m[0m tags_all               = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Name"        = "dev-hyperswitch-squid-asg-sg"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
      [32m+[0m[0m vpc_id                 = "vpc-03aa8b632e488dd58"
    }

[1m  # module.squid_proxy.module.asg_security_group.aws_vpc_security_group_egress_rule.this["0"][0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_egress_rule" "this" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m cidr_ipv4              = "0.0.0.0/0"
      [32m+[0m[0m description            = "Allow HTTP to internet"
      [32m+[0m[0m from_port              = 80
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_protocol            = "tcp"
      [32m+[0m[0m security_group_id      = (known after apply)
      [32m+[0m[0m security_group_rule_id = (known after apply)
      [32m+[0m[0m tags_all               = {}
      [32m+[0m[0m to_port                = 80
    }

[1m  # module.squid_proxy.module.asg_security_group.aws_vpc_security_group_egress_rule.this["1"][0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_egress_rule" "this" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m cidr_ipv4              = "0.0.0.0/0"
      [32m+[0m[0m description            = "Allow HTTPS to internet"
      [32m+[0m[0m from_port              = 443
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m ip_protocol            = "tcp"
      [32m+[0m[0m security_group_id      = (known after apply)
      [32m+[0m[0m security_group_rule_id = (known after apply)
      [32m+[0m[0m tags_all               = {}
      [32m+[0m[0m to_port                = 443
    }

[1m  # module.squid_proxy.module.asg_security_group.aws_vpc_security_group_ingress_rule.this["0"][0m will be created
[0m  [32m+[0m[0m resource "aws_vpc_security_group_ingress_rule" "this" {
      [32m+[0m[0m arn                          = (known after apply)
      [32m+[0m[0m description                  = "Allow traffic from Load Balancer"
      [32m+[0m[0m from_port                    = 3128
      [32m+[0m[0m id                           = (known after apply)
      [32m+[0m[0m ip_protocol                  = "tcp"
      [32m+[0m[0m referenced_security_group_id = "sg-06c88e80a498d59d8"
      [32m+[0m[0m security_group_id            = (known after apply)
      [32m+[0m[0m security_group_rule_id       = (known after apply)
      [32m+[0m[0m tags_all                     = {}
      [32m+[0m[0m to_port                      = 3128
    }

[1m  # module.squid_proxy.module.launch_template[0].aws_launch_template.this[0m will be created
[0m  [32m+[0m[0m resource "aws_launch_template" "this" {
      [32m+[0m[0m arn                    = (known after apply)
      [32m+[0m[0m default_version        = (known after apply)
      [32m+[0m[0m description            = "Launch template for Squid proxy instances"
      [32m+[0m[0m ebs_optimized          = "true"
      [32m+[0m[0m id                     = (known after apply)
      [32m+[0m[0m image_id               = "ami-08d31f74c5093410c"
      [32m+[0m[0m instance_type          = "t3.small"
      [32m+[0m[0m key_name               = "dev-hyperswitch-squid-keypair-eu-central-1"
      [32m+[0m[0m latest_version         = (known after apply)
      [32m+[0m[0m name                   = (known after apply)
      [32m+[0m[0m name_prefix            = "dev-hyperswitch-squid-"
      [32m+[0m[0m tags                   = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Name"        = "dev-hyperswitch-squid"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
      [32m+[0m[0m tags_all               = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Name"        = "dev-hyperswitch-squid"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
      [32m+[0m[0m update_default_version = true
      [32m+[0m[0m user_data              = (known after apply)
      [32m+[0m[0m vpc_security_group_ids = (known after apply)

      [32m+[0m[0m block_device_mappings {
          [32m+[0m[0m device_name = "/dev/xvda"

          [32m+[0m[0m ebs {
              [32m+[0m[0m delete_on_termination      = "true"
              [32m+[0m[0m encrypted                  = "true"
              [32m+[0m[0m iops                       = (known after apply)
              [32m+[0m[0m throughput                 = (known after apply)
              [32m+[0m[0m volume_initialization_rate = (known after apply)
              [32m+[0m[0m volume_size                = 20
              [32m+[0m[0m volume_type                = "gp3"
            }
        }

      [32m+[0m[0m iam_instance_profile {
          [32m+[0m[0m name = "dev-hyperswitch-squid-role"
        }

      [32m+[0m[0m metadata_options {
          [32m+[0m[0m http_endpoint               = "enabled"
          [32m+[0m[0m http_protocol_ipv6          = (known after apply)
          [32m+[0m[0m http_put_response_hop_limit = 1
          [32m+[0m[0m http_tokens                 = "required"
          [32m+[0m[0m instance_metadata_tags      = "enabled"
        }

      [32m+[0m[0m monitoring {
          [32m+[0m[0m enabled = false
        }

      [32m+[0m[0m tag_specifications {
          [32m+[0m[0m resource_type = "instance"
          [32m+[0m[0m tags          = {
              [32m+[0m[0m "Environment" = "dev"
              [32m+[0m[0m "ManagedBy"   = "Terraform"
              [32m+[0m[0m "Module"      = "composition/squid-proxy"
              [32m+[0m[0m "Name"        = "dev-hyperswitch-squid-instance"
              [32m+[0m[0m "Project"     = "hyperswitch"
              [32m+[0m[0m "Region"      = "eu-central-1"
              [32m+[0m[0m "Service"     = "squid-proxy"
            }
        }
      [32m+[0m[0m tag_specifications {
          [32m+[0m[0m resource_type = "volume"
          [32m+[0m[0m tags          = {
              [32m+[0m[0m "Environment" = "dev"
              [32m+[0m[0m "ManagedBy"   = "Terraform"
              [32m+[0m[0m "Module"      = "composition/squid-proxy"
              [32m+[0m[0m "Name"        = "dev-hyperswitch-squid-instance"
              [32m+[0m[0m "Project"     = "hyperswitch"
              [32m+[0m[0m "Region"      = "eu-central-1"
              [32m+[0m[0m "Service"     = "squid-proxy"
            }
        }
    }

[1m  # module.squid_proxy.module.logs_bucket.aws_s3_bucket.this[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket" "this" {
      [32m+[0m[0m acceleration_status         = (known after apply)
      [32m+[0m[0m acl                         = (known after apply)
      [32m+[0m[0m arn                         = (known after apply)
      [32m+[0m[0m bucket                      = "dev-hyperswitch-squid-logs-225681119357-eu-central-1"
      [32m+[0m[0m bucket_domain_name          = (known after apply)
      [32m+[0m[0m bucket_prefix               = (known after apply)
      [32m+[0m[0m bucket_regional_domain_name = (known after apply)
      [32m+[0m[0m force_destroy               = true
      [32m+[0m[0m hosted_zone_id              = (known after apply)
      [32m+[0m[0m id                          = (known after apply)
      [32m+[0m[0m object_lock_enabled         = (known after apply)
      [32m+[0m[0m policy                      = (known after apply)
      [32m+[0m[0m region                      = (known after apply)
      [32m+[0m[0m request_payer               = (known after apply)
      [32m+[0m[0m tags                        = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Name"        = "dev-hyperswitch-squid-logs-225681119357-eu-central-1"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
      [32m+[0m[0m tags_all                    = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Name"        = "dev-hyperswitch-squid-logs-225681119357-eu-central-1"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
      [32m+[0m[0m website_domain              = (known after apply)
      [32m+[0m[0m website_endpoint            = (known after apply)

      [32m+[0m[0m cors_rule (known after apply)

      [32m+[0m[0m grant (known after apply)

      [32m+[0m[0m lifecycle_rule (known after apply)

      [32m+[0m[0m logging (known after apply)

      [32m+[0m[0m object_lock_configuration (known after apply)

      [32m+[0m[0m replication_configuration (known after apply)

      [32m+[0m[0m server_side_encryption_configuration (known after apply)

      [32m+[0m[0m versioning (known after apply)

      [32m+[0m[0m website (known after apply)
    }

[1m  # module.squid_proxy.module.logs_bucket.aws_s3_bucket_public_access_block.this[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_public_access_block" "this" {
      [32m+[0m[0m block_public_acls       = true
      [32m+[0m[0m block_public_policy     = true
      [32m+[0m[0m bucket                  = (known after apply)
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m ignore_public_acls      = true
      [32m+[0m[0m restrict_public_buckets = true
    }

[1m  # module.squid_proxy.module.logs_bucket.aws_s3_bucket_server_side_encryption_configuration.this[0m will be created
[0m  [32m+[0m[0m resource "aws_s3_bucket_server_side_encryption_configuration" "this" {
      [32m+[0m[0m bucket = (known after apply)
      [32m+[0m[0m id     = (known after apply)

      [32m+[0m[0m rule {
          [32m+[0m[0m bucket_key_enabled = false

          [32m+[0m[0m apply_server_side_encryption_by_default {
              [32m+[0m[0m sse_algorithm     = "AES256"
                [90m# (1 unchanged attribute hidden)[0m[0m
            }
        }
    }

[1m  # module.squid_proxy.module.squid_iam_role[0].aws_iam_instance_profile.this[0][0m will be created
[0m  [32m+[0m[0m resource "aws_iam_instance_profile" "this" {
      [32m+[0m[0m arn         = (known after apply)
      [32m+[0m[0m create_date = (known after apply)
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m name        = "dev-hyperswitch-squid-role"
      [32m+[0m[0m name_prefix = (known after apply)
      [32m+[0m[0m path        = "/"
      [32m+[0m[0m role        = "dev-hyperswitch-squid-role"
      [32m+[0m[0m tags        = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Name"        = "dev-hyperswitch-squid-role"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
      [32m+[0m[0m tags_all    = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Name"        = "dev-hyperswitch-squid-role"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
      [32m+[0m[0m unique_id   = (known after apply)
    }

[1m  # module.squid_proxy.module.squid_iam_role[0].aws_iam_role.this[0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role" "this" {
      [32m+[0m[0m arn                   = (known after apply)
      [32m+[0m[0m assume_role_policy    = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action    = "sts:AssumeRole"
                      [32m+[0m[0m Effect    = "Allow"
                      [32m+[0m[0m Principal = {
                          [32m+[0m[0m Service = [
                              [32m+[0m[0m "ec2.amazonaws.com",
                            ]
                        }
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m create_date           = (known after apply)
      [32m+[0m[0m description           = "IAM role for Squid proxy instances"
      [32m+[0m[0m force_detach_policies = false
      [32m+[0m[0m id                    = (known after apply)
      [32m+[0m[0m managed_policy_arns   = (known after apply)
      [32m+[0m[0m max_session_duration  = 3600
      [32m+[0m[0m name                  = "dev-hyperswitch-squid-role"
      [32m+[0m[0m name_prefix           = (known after apply)
      [32m+[0m[0m path                  = "/"
      [32m+[0m[0m tags                  = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Name"        = "dev-hyperswitch-squid-role"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
      [32m+[0m[0m tags_all              = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Name"        = "dev-hyperswitch-squid-role"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
      [32m+[0m[0m unique_id             = (known after apply)

      [32m+[0m[0m inline_policy (known after apply)
    }

[1m  # module.squid_proxy.module.squid_iam_role[0].aws_iam_role_policy.inline["squid-config-bucket-read"][0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "inline" {
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m name        = "squid-config-bucket-read"
      [32m+[0m[0m name_prefix = (known after apply)
      [32m+[0m[0m policy      = jsonencode(
            {
              [32m+[0m[0m Statement = [
                  [32m+[0m[0m {
                      [32m+[0m[0m Action   = [
                          [32m+[0m[0m "s3:GetObject",
                          [32m+[0m[0m "s3:ListBucket",
                          [32m+[0m[0m "s3:GetBucketLocation",
                        ]
                      [32m+[0m[0m Effect   = "Allow"
                      [32m+[0m[0m Resource = [
                          [32m+[0m[0m "arn:aws:s3:::app-proxy-config-225681119357-eu-central-1",
                          [32m+[0m[0m "arn:aws:s3:::app-proxy-config-225681119357-eu-central-1/*",
                        ]
                    },
                ]
              [32m+[0m[0m Version   = "2012-10-17"
            }
        )
      [32m+[0m[0m role        = (known after apply)
    }

[1m  # module.squid_proxy.module.squid_iam_role[0].aws_iam_role_policy.inline["squid-logs-bucket-write"][0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "inline" {
      [32m+[0m[0m id          = (known after apply)
      [32m+[0m[0m name        = "squid-logs-bucket-write"
      [32m+[0m[0m name_prefix = (known after apply)
      [32m+[0m[0m policy      = (known after apply)
      [32m+[0m[0m role        = (known after apply)
    }

[1m  # module.squid_proxy.module.squid_iam_role[0].aws_iam_role_policy_attachment.managed["arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"][0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "managed" {
      [32m+[0m[0m id         = (known after apply)
      [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"
      [32m+[0m[0m role       = "dev-hyperswitch-squid-role"
    }

[1m  # module.squid_proxy.module.squid_iam_role[0].aws_iam_role_policy_attachment.managed["arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy"][0m will be created
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "managed" {
      [32m+[0m[0m id         = (known after apply)
      [32m+[0m[0m policy_arn = "arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy"
      [32m+[0m[0m role       = "dev-hyperswitch-squid-role"
    }

[1m  # module.squid_proxy.module.target_group[0].aws_lb_target_group.this[0m will be created
[0m  [32m+[0m[0m resource "aws_lb_target_group" "this" {
      [32m+[0m[0m arn                                = (known after apply)
      [32m+[0m[0m arn_suffix                         = (known after apply)
      [32m+[0m[0m connection_termination             = (known after apply)
      [32m+[0m[0m deregistration_delay               = "30"
      [32m+[0m[0m id                                 = (known after apply)
      [32m+[0m[0m ip_address_type                    = (known after apply)
      [32m+[0m[0m lambda_multi_value_headers_enabled = false
      [32m+[0m[0m load_balancer_arns                 = (known after apply)
      [32m+[0m[0m load_balancing_algorithm_type      = (known after apply)
      [32m+[0m[0m load_balancing_anomaly_mitigation  = (known after apply)
      [32m+[0m[0m load_balancing_cross_zone_enabled  = (known after apply)
      [32m+[0m[0m name                               = "dev-hyperswitch-squid-tg"
      [32m+[0m[0m name_prefix                        = (known after apply)
      [32m+[0m[0m port                               = 3128
      [32m+[0m[0m preserve_client_ip                 = (known after apply)
      [32m+[0m[0m protocol                           = "TCP"
      [32m+[0m[0m protocol_version                   = (known after apply)
      [32m+[0m[0m proxy_protocol_v2                  = false
      [32m+[0m[0m slow_start                         = 0
      [32m+[0m[0m tags                               = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Name"        = "dev-hyperswitch-squid-tg"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
      [32m+[0m[0m tags_all                           = {
          [32m+[0m[0m "Environment" = "dev"
          [32m+[0m[0m "ManagedBy"   = "Terraform"
          [32m+[0m[0m "Module"      = "composition/squid-proxy"
          [32m+[0m[0m "Name"        = "dev-hyperswitch-squid-tg"
          [32m+[0m[0m "Project"     = "hyperswitch"
          [32m+[0m[0m "Region"      = "eu-central-1"
          [32m+[0m[0m "Service"     = "squid-proxy"
        }
      [32m+[0m[0m target_type                        = "instance"
      [32m+[0m[0m vpc_id                             = "vpc-03aa8b632e488dd58"

      [32m+[0m[0m health_check {
          [32m+[0m[0m enabled             = true
          [32m+[0m[0m healthy_threshold   = 2
          [32m+[0m[0m interval            = 30
          [32m+[0m[0m matcher             = (known after apply)
          [32m+[0m[0m path                = (known after apply)
          [32m+[0m[0m port                = "traffic-port"
          [32m+[0m[0m protocol            = "TCP"
          [32m+[0m[0m timeout             = 10
          [32m+[0m[0m unhealthy_threshold = 2
        }

      [32m+[0m[0m stickiness (known after apply)

      [32m+[0m[0m target_failover (known after apply)

      [32m+[0m[0m target_group_health (known after apply)

      [32m+[0m[0m target_health_state (known after apply)
    }

[1mPlan:[0m 19 to add, 0 to change, 0 to destroy.
[0m
Changes to Outputs:
  [32m+[0m[0m squid_asg_name         = "dev-hyperswitch-squid-asg"
  [32m+[0m[0m squid_logs_bucket_name = (known after apply)
  [32m+[0m[0m squid_nlb_arn          = "arn:aws:elasticloadbalancing:eu-central-1:225681119357:loadbalancer/net/squid-nlb/ce5016edcbc76d0c"
  [32m+[0m[0m squid_target_group_arn = (known after apply)
[90m
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m

Note: You didn't use the -out option to save this plan, so Terraform can't
guarantee to take exactly these actions if you run "terraform apply" now.
